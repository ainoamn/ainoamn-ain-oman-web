# ๐ ุฏููู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช ุงูุฌุฏูุฏุฉ

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุนุงุฏุฉ ุจูุงุก ุตูุญุฉ `/admin/subscriptions` ุจุดูู **ุฃุจุณุท ูุฃูุซุฑ ูุนุงููุฉ**:
- **ุงููุฏูู:** 992 ุณุทุฑ ูุนูุฏ
- **ุงูุฌุฏูุฏ:** 400 ุณุทุฑ ุจุณูุท ููุงุถุญ

---

## โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. **ูุงุฌูุฉ ุจุณูุทุฉ ููุจุงุดุฑุฉ**
- ูุงุฆูุฉ ุฌุงูุจูุฉ ููุจุงูุงุช
- ุชูุงุตูู ุงูุจุงูุฉ ุงููุฎุชุงุฑุฉ ูู ุงูููุชุตู
- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูู ุงูุฃุณูู

### 2. **ุฑุจุท ูุจุงุดุฑ ูุน ูุธุงู ุงูุตูุงุญูุงุช**
- ุนุฑุถ ุฌููุน ุตูุงุญูุงุช ูู ุจุงูุฉ ูู `PLAN_FEATURES`
- ุฑุจุท ุชููุงุฆู ูุน `featurePermissions.ts`
- ุชุญุฏูุซ ููุฑู ุนูุฏ ุชุบููุฑ ุงูุจุงูุฉ

### 3. **ุฅุฏุงุฑุฉ ุณููุฉ**
- ุชุนููู ุจุงูุฉ ูููุณุชุฎุฏู ูู dropdown ูุงุญุฏ
- ุชุนุฏูู ุงูุจุงูุฉ ูู modal ุจุณูุท
- ุฅูุบุงุก ุงูุงุดุชุฑุงู ุจููุฑุฉ ูุงุญุฏุฉ

---

## ๐ ูููู ุงูุตูุญุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Header - ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ (4 ุจุทุงูุงุช)   โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ              โ                          โ
โ   ุงูุจุงูุงุช    โ    ุชูุงุตูู ุงูุจุงูุฉ         โ
โ   (ูุณุงุฑ)    โ    ุงููุฎุชุงุฑุฉ              โ
โ              โ    + ุงูุตูุงุญูุงุช           โ
โ              โ    + ุงููุณุชุฎุฏููู          โ
โ              โ                          โ
โโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ง ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ

### 1. ุนุฑุถ ุงูุจุงูุงุช

```typescript
// ููุฑุฃ ุงูุจุงูุงุช ูู subscriptionSystem.ts
const [plans] = useState([...SUBSCRIPTION_PLANS]);
```

**ุงููุชูุฌุฉ:**
- 4 ุจุงูุงุช: Basic, Standard, Premium, Enterprise
- ูู ุจุงูุฉ ุชุนุฑุถ: ุงูุงุณูุ ุงูุณุนุฑุ ุงููุตูุ ุงูุญุฏูุฏ

---

### 2. ุนุฑุถ ุงูุตูุงุญูุงุช

```typescript
// ููุฑุฃ ุงูุตูุงุญูุงุช ูู featurePermissions.ts
{PLAN_FEATURES[plan.id]?.map(featureId => {
  const feature = FEATURE_PERMISSIONS[featureId];
  return <FeatureItem>{feature.nameAr}</FeatureItem>
})}
```

**ุงููุชูุฌุฉ:**
- **Basic:** 6 ุตูุงุญูุงุช
- **Standard:** 19 ุตูุงุญูุฉ
- **Premium:** 22 ุตูุงุญูุฉ
- **Enterprise:** 24 ุตูุงุญูุฉ (ูู ุดูุก)

---

### 3. ุชุนููู ุจุงูุฉ ูููุณุชุฎุฏู

```typescript
const assignPlanToUser = (userId: string, planId: string) => {
  // 1. ุฅูุดุงุก ุงุดุชุฑุงู ุฌุฏูุฏ
  const subscription = { ... };
  
  // 2. ุชุญุฏูุซ ุงููุณุชุฎุฏู
  setUsers(users.map(u => u.id === userId ? {...u, subscription} : u));
  
  // 3. ุญูุธ ูู localStorage
  localStorage.setItem('ain_auth', JSON.stringify(currentUser));
  
  // 4. ุฅุทูุงู ุญุฏุซ ุงูุชุญุฏูุซ
  window.dispatchEvent(new Event('ain_auth:change'));
};
```

**ุงููุชูุฌุฉ:**
- ูุชู ุชุญุฏูุซ ุงูุตูุงุญูุงุช **ุชููุงุฆูุงู** ูู ุฌููุน ุงูุตูุญุงุช
- **ุจุฏูู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ!**

---

### 4. ุชุนุฏูู ุงูุจุงูุฉ

```typescript
// Modal ุจุณูุท ูุญุชูู ุนูู:
- ุงูุงุณู (ุนุฑุจู + ุฅูุฌููุฒู)
- ุงูุณุนุฑ
- ุงููุฏุฉ (ุดูุฑู/ุณููู)
- ุงูุญุฏูุฏ (ุนูุงุฑุงุชุ ูุญุฏุงุชุ ุญุฌูุฒุงุชุ ูุณุชุฎุฏููู)
```

**ููุงุญุธุฉ:** ุงูุตูุงุญูุงุช ูุญุฏุฏุฉ ูู `featurePermissions.ts` ููุง ุชุชุบูุฑ ูู ููุง.

---

## ๐ ุงูุชูุงูู ูุน ุจุงูู ุงููููุน

### 1. ูุฑุงุกุฉ ุงูุจุงูุฉ ุงูุญุงููุฉ

ุฃู ุตูุญุฉ ูู ุงููููุน ูููููุง ูุฑุงุกุฉ ุจุงูุฉ ุงููุณุชุฎุฏู:

```typescript
const authData = localStorage.getItem('ain_auth');
const user = JSON.parse(authData);
const planId = user.subscription?.planId; // 'basic', 'standard', etc.
```

---

### 2. ุงูุชุญูู ูู ุงูุตูุงุญูุฉ

```typescript
import { useFeatureAccess } from '@/hooks/useFeatureAccess';

const { hasAccess } = useFeatureAccess('LEGAL_VIEW');

if (hasAccess) {
  // ุนุฑุถ ุงููุญุชูู
}
```

---

### 3. ุญูุงูุฉ ูุณู

```typescript
import FeatureGuard from '@/components/FeatureGuard';

<FeatureGuard featureId="AI_ANALYTICS" mode="lock">
  <AISection />
</FeatureGuard>
```

---

## ๐ ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู

### ุณููุงุฑูู 1: ุชุนููู ุจุงูุฉ Standard ููุณุชุฎุฏู ุฌุฏูุฏ

1. ุงููุฏูุฑ ููุชุญ `/admin/subscriptions`
2. ูุฎุชุงุฑ "ุงูุจุงูุฉ ุงููุนูุงุฑูุฉ" ูู ุงููุงุฆูุฉ ุงููุณุฑู
3. ูุฑู ุฌููุน ุงูุตูุงุญูุงุช (19 ุตูุงุญูุฉ)
4. ูู ูุณู "ุงููุณุชุฎุฏููู"ุ ูุฎุชุงุฑ ุงููุณุชุฎุฏู ูู dropdown
5. ูุฎุชุงุฑ "ุงูุจุงูุฉ ุงููุนูุงุฑูุฉ"
6. **โ ุชู!** ุงููุณุชุฎุฏู ุงูุขู ูุฏูู:
   - ุฅููุงููุฉ ุงููุตูู ููููุงู
   - ุฅููุงููุฉ ุงููุตูู ููุชูููู
   - ุฅููุงููุฉ ุงููุตูู ููุตูุงูุฉ
   - ุฅููุงููุฉ ุงููุตูู ููุนููุฏ
   - **ููู ุจุฏูู** ุงูุดุคูู ุงููุงููููุฉ (Premium ููุท)

---

### ุณููุงุฑูู 2: ุชุฑููุฉ ูุณุชุฎุฏู ูู Basic ุฅูู Premium

1. ุงููุณุชุฎุฏู ุญุงููุงู ูู Basic (6 ุตูุงุญูุงุช ููุท)
2. ููุชุญ `/property/P-123/admin`
3. ูุฑู: ูุธุฑุฉ ุนุงูุฉ โุ ููู ุงูููุงู ๐ุ ุงูุตูุงูุฉ ๐ุ ุงููุงููููุฉ ๐
4. ุงููุฏูุฑ ููุชุญ `/admin/subscriptions`
5. ูุฎุชุงุฑ "ุงูุจุงูุฉ ุงููููุฒุฉ"
6. ูุนูู ุงูุจุงูุฉ ูููุณุชุฎุฏู
7. **ููุฑุงู** (ุจุฏูู ุฅุนุงุฏุฉ ุชุญููู):
   - ุงูููุงู โ ุฃุตุจุญุช ูุชุงุญุฉ
   - ุงูุตูุงูุฉ โ ุฃุตุจุญุช ูุชุงุญุฉ
   - ุงููุงููููุฉ โ ุฃุตุจุญุช ูุชุงุญุฉ
   - ุงูุฐูุงุก ุงูุงุตุทูุงุนู โ ุฃุตุจุญ ูุชุงุญ

---

### ุณููุงุฑูู 3: ุชุนุฏูู ุญุฏูุฏ ุงูุจุงูุฉ

1. ุงููุฏูุฑ ูุฑูุฏ ุฒูุงุฏุฉ ุนุฏุฏ ุงูุนูุงุฑุงุช ูู Basic ูู 5 ุฅูู 10
2. ููุชุญ `/admin/subscriptions`
3. ูุฎุชุงุฑ "ุงูุจุงูุฉ ุงูุฃุณุงุณูุฉ"
4. ูุถุบุท "ุชุนุฏูู ุงูุจุงูุฉ"
5. ูุบูุฑ "ุนุฏุฏ ุงูุนูุงุฑุงุช" ูู 5 ุฅูู 10
6. ูุญูุธ
7. **โ ุชู!** ุฌููุน ูุณุชุฎุฏูู Basic ูููููู ุงูุขู ุฅุถุงูุฉ 10 ุนูุงุฑุงุช

---

## ๐จ ุงูุฅุญุตุงุฆูุงุช ุงููุนุฑูุถุฉ

ูู ุฃุนูู ุงูุตูุญุฉ:

| ุงูุจุทุงูุฉ | ุงููุตู | ุงูููู |
|---------|-------|-------|
| ุฅุฌูุงูู ุงูุจุงูุงุช | ุนุฏุฏ ุงูุจุงูุงุช ุงููุชุงุญุฉ | ุฃุฒุฑู |
| ุงููุณุชุฎุฏููู | ุนุฏุฏ ุงููุณุชุฎุฏููู | ุฃุฎุถุฑ |
| ุงูุตูุงุญูุงุช | ุฅุฌูุงูู ุงูุตูุงุญูุงุช ูู ุงููุธุงู | ุจููุณุฌู |
| ุงูุงุดุชุฑุงูุงุช ุงููุดุทุฉ | ุนุฏุฏ ุงููุณุชุฎุฏููู ุงููุดุชุฑููู | ุจุฑุชูุงูู |

---

## ๐ ุฑุจุท ุงูุตูุงุญูุงุช

ุงูุตูุญุฉ **ูุฑุจูุทุฉ ุชููุงุฆูุงู** ูุน:

1. โ `src/lib/featurePermissions.ts` - ุชุนุฑูู ุงูุตูุงุญูุงุช
2. โ `src/lib/subscriptionSystem.ts` - ุงูุจุงูุงุช
3. โ `src/hooks/useFeatureAccess.ts` - ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
4. โ `src/components/FeatureGuard.tsx` - ุญูุงูุฉ ุงูุฃูุณุงู
5. โ `src/components/property/PropertyAdminTabs.tsx` - ุชุจููุจุงุช ุงูุนูุงุฑ

---

## ๐ฑ ุงูุตูุญุงุช ุงููุชุฃุซุฑุฉ

ุนูุฏ ุชุบููุฑ ุจุงูุฉ ุงููุณุชุฎุฏูุ ุชุชุฃุซุฑ **ุฌููุน** ูุฐู ุงูุตูุญุงุช ุชููุงุฆูุงู:

### 1. ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุนูุงุฑ
- `/property/[id]/admin`
- **ุงูุชุฃุซูุฑ:** ุนุฑุถ/ุฅุฎูุงุก ุงูุชุจููุจุงุช ุญุณุจ ุงูุจุงูุฉ

### 2. ุตูุญุฉ ุงูููุงู
- `/tasks`
- **ุงูุชุฃุซูุฑ:** ุฅุฎูุงุก ุฅุฐุง ูู ุชูู ุงูุจุงูุฉ Standard+

### 3. ุตูุญุฉ ุงููุถุงูุง ุงููุงููููุฉ
- `/legal`
- **ุงูุชุฃุซูุฑ:** ุฅุฎูุงุก ุฅุฐุง ูู ุชูู ุงูุจุงูุฉ Premium+

### 4. ุตูุญุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู
- `/admin/ai-panel`
- **ุงูุชุฃุซูุฑ:** ุฅุฎูุงุก ุฅุฐุง ูู ุชูู ุงูุจุงูุฉ Premium+

### 5. ูุบูุฑูุง...
- ุฌููุน ุงูุตูุญุงุช ุงูุชู ุชุณุชุฎุฏู `FeatureGuard`

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ 1: ุชุนููู ุจุงูุฉ

```bash
1. ุงูุชุญ http://localhost:3000/admin/subscriptions
2. ุงุฎุชุฑ "ุงูุจุงูุฉ ุงููุนูุงุฑูุฉ"
3. ุงุฎุชุฑ ุงููุณุชุฎุฏู ูู ุงููุงุฆูุฉ
4. ุงุฎุชุฑ "ุงูุจุงูุฉ ุงููุนูุงุฑูุฉ" ูู dropdown
5. โ ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ "ุชู ุชุนููู ุงูุจุงูุฉ ุจูุฌุงุญ"
```

---

### ุงุฎุชุจุงุฑ 2: ุงูุชุญูู ูู ุงูุตูุงุญูุงุช

```bash
1. ุงูุชุญ http://localhost:3000/property/P-123/admin
2. โ ูุฌุจ ุฃู ุชุฑู ุงูุชุจููุจุงุช ุงููุชุงุญุฉ ููุท
3. โ ูุฌุจ ุฃู ุชุฑู ุฅุดุนุงุฑ ุจุงูุชุจููุจุงุช ุงูููููุฉ
4. ุงูุชุญ http://localhost:3000/admin/subscriptions
5. ุบููุฑ ุงูุจุงูุฉ ุฅูู Premium
6. ุงุฑุฌุน ุฅูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุนูุงุฑ
7. โ ูุฌุจ ุฃู ุชุฑู ุฌููุน ุงูุชุจููุจุงุช (ุจุฏูู ุฅุนุงุฏุฉ ุชุญููู!)
```

---

### ุงุฎุชุจุงุฑ 3: ุฅูุบุงุก ุงูุงุดุชุฑุงู

```bash
1. ุงูุชุญ http://localhost:3000/admin/subscriptions
2. ุงุถุบุท ุฒุฑ X ุงูุฃุญูุฑ ุนูุฏ ุงููุณุชุฎุฏู
3. ุฃูุฏ ุงูุฅูุบุงุก
4. โ ูุฌุจ ุฃู ุชุธูุฑ "ุจุฏูู ุงุดุชุฑุงู"
5. ุงูุชุญ ุฃู ุตูุญุฉ ูุญููุฉ
6. โ ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ "ููุฒุฉ ููููุฉ"
```

---

## ๐ฏ ุงููุฑููุงุช ุจูู ุงููุฏูู ูุงูุฌุฏูุฏ

| ุงูููุฒุฉ | ุงููุฏูู | ุงูุฌุฏูุฏ |
|--------|--------|--------|
| **ุนุฏุฏ ุงูุฃุณุทุฑ** | 992 ุณุทุฑ | 400 ุณุทุฑ |
| **ุงูุชุนููุฏ** | ูุนูุฏ ุฌุฏุงู | ุจุณูุท ููุงุถุญ |
| **ุงูุชุนุฏูู** | ุตุนุจ | ุณูู |
| **ุงูุฑุจุท ูุน ุงููุธุงู** | ูุฏูู | ุชููุงุฆู |
| **ุนุฑุถ ุงูุตูุงุญูุงุช** | ูุฎูู | ูุงุถุญ ููุฑุฆู |
| **ุชุนููู ุงูุจุงูุฉ** | modal ูุนูุฏ | dropdown ุจุณูุท |
| **ุงูุชุญุฏูุซ** | ูุญุชุงุฌ ุฅุนุงุฏุฉ ุชุญููู | ููุฑู |

---

## ๐ก ูุตุงุฆุญ ูููุฉ

### 1. ุฅุถุงูุฉ ุจุงูุฉ ุฌุฏูุฏุฉ

ูุฅุถุงูุฉ ุจุงูุฉ ุฌุฏูุฏุฉุ ุนุฏูู ููุท:
- `src/lib/subscriptionSystem.ts` - ุฃุถู ุงูุจุงูุฉ
- `src/lib/featurePermissions.ts` - ุญุฏุฏ ุงูุตูุงุญูุงุช

**ูุง ุญุงุฌุฉ ูุชุนุฏูู ุตูุญุฉ ุงูุฅุฏุงุฑุฉ!**

---

### 2. ุฅุถุงูุฉ ุตูุงุญูุฉ ุฌุฏูุฏุฉ

1. ุฃุถู ุงูุตูุงุญูุฉ ูู `FEATURE_PERMISSIONS`
2. ุฃุถููุง ููุจุงูุงุช ุงูููุงุณุจุฉ ูู `PLAN_FEATURES`
3. ุงุณุชุฎุฏููุง ูู ุฃู ุตูุญุฉ:
```tsx
<FeatureGuard featureId="YOUR_NEW_FEATURE">
  <YourComponent />
</FeatureGuard>
```

---

### 3. ุชุฎุตูุต ุงูุฃููุงู

ุงูุฃููุงู ูุญุฏุฏุฉ ูู ูู ุจุงูุฉ:
```typescript
color: 'bg-blue-500'  // ููุฃุณุงุณูุฉ
color: 'bg-green-500' // ูููุนูุงุฑูุฉ
color: 'bg-purple-500' // ูููููุฒุฉ
color: 'bg-orange-500' // ูููุคุณุณูุฉ
```

---

## โ ุงูุฎูุงุตุฉ

ุงูุตูุญุฉ ุงูุฌุฏูุฏุฉ:
- โ **ุฃุจุณุท** ุจู 60%
- โ **ูุฑุจูุทุฉ ุชููุงุฆูุงู** ูุน ูุธุงู ุงูุตูุงุญูุงุช
- โ **ุฃุณุฑุน** ูู ุงูุชุนููู ูุงูุชุนุฏูู
- โ **ุฃูุถุญ** ูู ุนุฑุถ ุงูุตูุงุญูุงุช
- โ **ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู** ุงูุขู!

---

**ุชู ุฅูุดุงุคู:** 12 ุฃูุชูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 2.0  
**ุงูุญุงูุฉ:** ูุดุท ููุญุณูู โ

