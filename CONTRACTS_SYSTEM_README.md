# نظام إدارة القوالب والعقود

## نظرة عامة

تم تطوير نظام شامل لإدارة قوالب العقود والعقود في منصة Ain Oman. النظام يدعم القوالب ثنائية اللغة (العربية والإنجليزية) ويوفر واجهة احترافية لعرض وطباعة العقود.

## الميزات الرئيسية

### 1. إدارة القوالب
- **قوالب سكنية وتجارية**: 34 قالب متاح
- **دعم ثنائي اللغة**: عرض المحتوى بالعربية والإنجليزية
- **تصنيف القوالب**: عقود، طلبات، رسائل
- **ربط القوالب**: ربط القوالب بعقارات أو وحدات محددة

### 2. إنشاء العقود
- **واجهة متعددة الخطوات**: اختيار القالب → ملء البيانات → معاينة
- **ملء تلقائي للبيانات**: استيراد بيانات العقار والمستأجر والمؤجر
- **توليد ديناميكي**: استبدال المتغيرات بالبيانات الفعلية

### 3. عرض وطباعة احترافية
- **رأس الشركة**: يظهر كتر هد عند الطباعة
- **تنسيق ثنائي اللغة**: عرض منظم للعربية والإنجليزية
- **تنسيق طباعة محسن**: تنسيقات خاصة للطباعة
- **قسم التوقيعات**: مساحات للتوقيع والتاريخ

## الملفات الرئيسية

### الصفحات
- `src/pages/contracts/templates/[id].tsx` - معاينة القوالب
- `src/pages/contracts/create.tsx` - إنشاء العقود
- `src/pages/contracts/templates.tsx` - قائمة القوالب

### المكونات
- `src/components/contracts/ContractDisplay.tsx` - مكون عرض العقود

### APIs
- `src/pages/api/contracts/generate.ts` - توليد العقود
- `src/pages/api/contract-templates/` - إدارة القوالب

### البيانات
- `.data/contract-templates.json` - قاعدة بيانات القوالب
- `.data/excel-templates.json` - القوالب المحولة من Excel

## التنسيقات

### ملف CSS الرئيسي
- `public/styles/contracts.css` - تنسيقات العقود والقوالب

### تنسيقات الطباعة
- دعم A4 مع هوامش مناسبة
- خطوط محسنة للطباعة
- تنسيقات خاصة للعربية والإنجليزية
- تجنب قطع الأقسام عند الطباعة

## كيفية الاستخدام

### 1. عرض القوالب
```
http://localhost:3000/contracts/templates
```

### 2. معاينة قالب محدد
```
http://localhost:3000/contracts/templates/[template-id]
```

### 3. إنشاء عقد من قالب
```
http://localhost:3000/contracts/create?template=[template-id]
```

## الميزات التقنية

### دعم ثنائي اللغة
- عرض النصوص بالعربية (من اليمين لليسار)
- عرض النصوص بالإنجليزية (من اليسار لليمين)
- ترقيم البنود باللغتين

### تنسيق الطباعة
- رأس الشركة كتر هد
- عناوين الأقسام مميزة
- البنود مرقمة ومنظمة
- قسم التوقيعات في النهاية

### استبدال المتغيرات
- `[Owner Name]` - اسم المؤجر
- `[Tenant Name]` - اسم المستأجر
- `[Property Address]` - عنوان العقار
- `[Amount]` - المبلغ
- `[Date]` - التاريخ

## التطوير

### إضافة قالب جديد
1. أضف القالب إلى `.data/contract-templates.json`
2. استخدم البنية المحددة للأقسام والبنود
3. تأكد من دعم ثنائي اللغة

### تخصيص التنسيقات
1. عدل `public/styles/contracts.css`
2. أضف تنسيقات الطباعة في `@media print`
3. اختبر التنسيقات على الشاشة والطباعة

## المتطلبات

- Next.js 12+
- React 18+
- TypeScript
- Tailwind CSS

## الدعم

للحصول على الدعم أو الإبلاغ عن مشاكل، يرجى التواصل مع فريق التطوير.
