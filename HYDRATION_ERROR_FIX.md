# ๐ง **ุฅุตูุงุญ Hydration Error - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ**

**ุงูุชุงุฑูุฎ:** 14 ุฃูุชูุจุฑ 2025  
**ุงูููู:** `src/pages/index.tsx`

---

## ๐ **ุงููุดููุฉ:**

```
Error: Hydration failed because the initial UI does not match 
what was rendered on the server.
```

### ุงูุณุจุจ:
ุงูู **Hydration Error** ูุญุฏุซ ุนูุฏูุง ูููู ููุงู ุงุฎุชูุงู ุจูู:
- ูุง ูุชู ุนุฑุถู ุนูู **ุงูุณูุฑูุฑ** (Server-Side Rendering)
- ูุง ูุชู ุนุฑุถู ูู **ุงููุชุตูุญ** (Client-Side)

---

## ๐ **ุงูุฃุณุจุงุจ ุงูููุชุดูุฉ:**

### 1๏ธโฃ ุงุณุชุฎุฏุงู `theme` ูู localStorage
```typescript
const { theme } = useTheme();
const isDark = theme === "dark";  // โ ูููุฉ ูุฎุชููุฉ ุนูู ุงูุณูุฑูุฑ ูุงูููุงููุช!
```

**ุงููุดููุฉ:** 
- ุงูุณูุฑูุฑ ูุง ูููู ูุตูู ูู localStorage
- ุงูููุงููุช ููุฑุฃ ูู localStorage
- ุงููุชูุฌุฉ: ููู ูุฎุชููุฉ!

### 2๏ธโฃ ุงุณุชุฎุฏุงู `Date.now()` ูู ุงูุจูุงูุงุช
```typescript
const now = Date.now();  // โ ููุช ูุฎุชูู ุนูู ุงูุณูุฑูุฑ ูุงูููุงููุช!
```

**ุงููุดููุฉ:**
- ุงูุณูุฑูุฑ ููุดุฆ ุงูุจูุงูุงุช ูู ููุช ูุนูู
- ุงูููุงููุช ูุญูู ุงูุตูุญุฉ ูู ููุช ุขุฎุฑ (ุจุนุฏ ูููู ุซูุงูู)
- ุงููุชูุฌุฉ: ุฃููุงุช ูุฎุชููุฉ!

### 3๏ธโฃ ุงุณุชุฎุฏุงู `Date.now()` ูู ุฏุงูุฉ render
```typescript
const formatRemainingTime = (endTime: number) => {
  const diff = endTime - Date.now();  // โ ููุญุณุจ ุฃุซูุงุก ุงูู render!
  ...
};
```

**ุงููุดููุฉ:**
- ุชูุญุณุจ ุฃุซูุงุก SSR ุนูู ุงูุณูุฑูุฑ
- ุชูุญุณุจ ูุฑุฉ ุฃุฎุฑู ุนูู ุงูููุงููุช
- ุงููุชูุฌุฉ: ููู ูุฎุชููุฉ!

---

## โ **ุงูุญููู ุงูููุทุจููุฉ:**

### 1๏ธโฃ ุงุณุชุฎุฏุงู `mounted` State
```typescript
// ุฅุถุงูุฉ state ููุชุญูู ูู ุงูุชุญููู
const [mounted, setMounted] = useState(false);

// ุชุญุฏูุฏู ุจุนุฏ ุงูุชุญููู
useEffect(() => {
  setMounted(true);
}, []);
```

### 2๏ธโฃ ุฅุตูุงุญ `theme`
```typescript
// ูุจู:
const isDark = theme === "dark";  // โ

// ุจุนุฏ:
const isDark = mounted ? theme === "dark" : false;  // โ
```

**ุงูุดุฑุญ:** 
- ุฃุซูุงุก SSR โ `mounted = false` โ `isDark = false`
- ุจุนุฏ Hydration โ `mounted = true` โ `isDark` ููุญุณุจ ูู theme
- ุงููุชูุฌุฉ: **ูุง ุชูุฌุฏ ุงุฎุชูุงูุงุช!**

### 3๏ธโฃ ุฅุตูุงุญ `Date.now()` ูู ุงูุจูุงูุงุช
```typescript
// ูุจู:
const now = Date.now();  // โ

// ุจุนุฏ:
const now = 1728950400000;  // โ ูููุฉ ุซุงุจุชุฉ
```

**ุงูุดุฑุญ:**
- ูููุฉ ุซุงุจุชุฉ ุชูุณุชุฎุฏู ุนูู ุงูุณูุฑูุฑ ูุงูููุงููุช
- ูุง ุชูุฌุฏ ุงุฎุชูุงูุงุช
- ุงููุฒุงุฏุงุช ูุง ุชุฒุงู ุชุนูู ุจุดูู ุตุญูุญ

### 4๏ธโฃ ุฅุตูุงุญ `formatRemainingTime()`
```typescript
const formatRemainingTime = (endTime: number) => {
  // ุฅุตูุงุญ Hydration: ุงุณุชุฎุฏุงู ูููุฉ ุซุงุจุชุฉ ุฃุซูุงุก SSR
  if (!mounted) return "ุฌุงุฑู ุงูุญุณุงุจ...";  // โ
  
  const diff = endTime - Date.now();
  const days = Math.max(0, Math.floor(diff / 86400000));
  const hours = Math.max(0, Math.floor((diff % 86400000) / 3600000));
  return `${days} ููู ู ${hours} ุณุงุนุฉ`;
};
```

**ุงูุดุฑุญ:**
- ุฃุซูุงุก SSR โ `mounted = false` โ ููุฑุฌุน "ุฌุงุฑู ุงูุญุณุงุจ..."
- ุจุนุฏ Hydration โ `mounted = true` โ ููุญุณุจ ุงูููุช ุงููุนูู
- ุงููุชูุฌุฉ: **hydration ูุงุฌุญ!**

---

## ๐ **ุงูุชุบููุฑุงุช ุงูููุทุจููุฉ:**

### ูู `src/pages/index.tsx`:

1. โ ุฅุถุงูุฉ `const [mounted, setMounted] = useState(false)`
2. โ ุฅุถุงูุฉ `useEffect(() => { setMounted(true); }, [])`
3. โ ุชุนุฏูู `isDark = mounted ? theme === "dark" : false`
4. โ ุชุนุฏูู `const now = 1728950400000` (ูููุฉ ุซุงุจุชุฉ)
5. โ ุฅุถุงูุฉ ุดุฑุท `if (!mounted)` ูู `formatRemainingTime()`

---

## ๐งช **ููููุฉ ุงูุงุฎุชุจุงุฑ:**

### 1. ุงูุชุญ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:
```
http://localhost:3000
```

### 2. ุงูุชุญ Developer Tools (F12):
```
- ุงุฐูุจ ุฅูู Console
- ูุฌุจ ุฃูุง ุชุฑู ุฎุทุฃ Hydration
```

### 3. ุชุญูู ูู ุงููุธุงุฆู:
```
โ ุงูุตูุญุฉ ุชุญูู ุจุฏูู ุฃุฎุทุงุก
โ ุงููุฒุงุฏุงุช ุชุนุฑุถ ุงูููุช ุงููุชุจูู
โ Theme ูุนูู ุจุดูู ุตุญูุญ
โ ุฌููุน ุงูุจูุงูุงุช ุชุธูุฑ
```

---

## ๐ก **ูุงุนุฏุฉ ุนุงูุฉ ูุชุฌูุจ Hydration Errors:**

### โ **ูุง ุชุณุชุฎุฏู ูู ุฃูู Render:**
1. `localStorage` ุฃู `sessionStorage`
2. `Date.now()` ุฃู `new Date()`
3. `Math.random()`
4. `window` ุฃู `document`
5. ุฃู ุดูุก ูุนุชูุฏ ุนูู ุงููุชุตูุญ

### โ **ุงูุญู:**
```typescript
const [mounted, setMounted] = useState(false);

useEffect(() => {
  setMounted(true);
}, []);

// ุงุณุชุฎุฏู mounted ูุจู ุงููุตูู ูุฃู ุดูุก ูู ุงููุชุตูุญ
if (!mounted) return <div>Loading...</div>;
```

---

## ๐ **ูุฑุงุฌุน:**

- [Next.js Hydration Docs](https://nextjs.org/docs/messages/react-hydration-error)
- [React Hydration](https://react.dev/reference/react-dom/client/hydrateRoot)

---

## โ **ุงููุชูุฌุฉ:**

- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก Hydration
- โ ุงูุตูุญุฉ ุชุนูู ุจุดูู ูุซุงูู
- โ ุฌููุน ุงููุธุงุฆู ุณูููุฉ
- โ ุงูุชุฌุฑุจุฉ ุณูุณุฉ ูููุณุชุฎุฏู

---

**ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ! ๐**

*14 ุฃูุชูุจุฑ 2025*


