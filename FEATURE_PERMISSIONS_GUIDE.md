# ๐ ุฏููู ูุธุงู ุงูุตูุงุญูุงุช ุงูุดุงูู - Ain Oman Web

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุตูุงุญูุงุช ูุชูุงูู ูุชุญูู ูู ุนุฑุถ ูุฅุฎูุงุก ุงูููุฒุงุช ุจูุงุกู ุนูู ุจุงูุฉ ุงุดุชุฑุงู ุงููุณุชุฎุฏู.

---

## ๐ ูููุงุช ุงููุธุงู

### 1. **`src/lib/featurePermissions.ts`**
- ุชุนุฑูู ุฌููุน ุงูุตูุงุญูุงุช ูู ุงููููุน
- ุฑุจุท ูู ุตูุงุญูุฉ ุจุงูุจุงูุฉ ุงููุทููุจุฉ
- ุฏูุงู ูุณุงุนุฏุฉ ููุชุญูู ูู ุงูุตูุงุญูุงุช

### 2. **`src/hooks/useFeatureAccess.ts`**
- Hook ููุชุญูู ูู ุตูุงุญูุฉ ูุงุญุฏุฉ: `useFeatureAccess()`
- Hook ููุชุญูู ูู ุนุฏุฉ ุตูุงุญูุงุช: `useFeatureAccessMultiple()`
- ุฏูุงู ูุณุงุนุฏุฉ: `getUserPlan()`, `getPlanName()`

### 3. **`src/components/FeatureGuard.tsx`**
- ูููู ูุญูุงูุฉ ุงูุฃูุณุงู: `<FeatureGuard>`
- ุดุงุฑุฉ "ูููุฒ": `<PremiumBadge>`
- ุฑุณุงูุฉ ุชุฑููุฉ: `<UpgradePrompt>`

### 4. **`src/components/property/PropertyAdminTabs.tsx`**
- ุชุจููุจุงุช ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุนูุงุฑ ูุน ุงูุตูุงุญูุงุช
- ุนุฑุถ ุงูุชุจููุจุงุช ุงููุชุงุญุฉ ููุท
- ุฅุดุนุงุฑ ุจุงูููุฒุงุช ุงูููููุฉ

---

## ๐ฏ ุงูุตูุงุญูุงุช ุงููุชุงุญุฉ

### ุฅุฏุงุฑุฉ ุงูุนูุงุฑ (Property Management)

| ุงูุตูุงุญูุฉ | ุงููุนุฑู | ุงูุจุงูุฉ ุงููุทููุจุฉ | ุงููุตู |
|---------|-------|----------------|-------|
| ูุธุฑุฉ ุนุงูุฉ | `OVERVIEW` | Basic | ุนุฑุถ ูุธุฑุฉ ุนุงูุฉ ูุฅุญุตุงุฆูุงุช ุงูุนูุงุฑ |
| ุนุฑุถ ุงูููุงู | `TASKS_VIEW` | Standard | ุนุฑุถ ููุงู ุงูุนูุงุฑ |
| ุฅุฏุงุฑุฉ ุงูููุงู | `TASKS_MANAGE` | Standard | ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูููุงู |
| ุนุฑุถ ุนููุฏ ุงูุฅูุฌุงุฑ | `LEASES_VIEW` | Basic | ุนุฑุถ ุนููุฏ ุงูุฅูุฌุงุฑ |
| ุฅุฏุงุฑุฉ ุนููุฏ ุงูุฅูุฌุงุฑ | `LEASES_MANAGE` | Standard | ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุนููุฏ ุงูุฅูุฌุงุฑ |
| ุนุฑุถ ุงูููุงุชูุฑ | `INVOICES_VIEW` | Basic | ุนุฑุถ ุงูููุงุชูุฑ ูุงููุฏููุนุงุช |
| ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ | `INVOICES_MANAGE` | Standard | ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูููุงุชูุฑ |
| ุนุฑุถ ุงูุตูุงูุฉ | `MAINTENANCE_VIEW` | Standard | ุนุฑุถ ุทูุจุงุช ุงูุตูุงูุฉ |
| ุฅุฏุงุฑุฉ ุงูุตูุงูุฉ | `MAINTENANCE_MANAGE` | Standard | ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุตูุงูุฉ |
| ุนุฑุถ ุงููุถุงูุง ุงููุงููููุฉ | `LEGAL_VIEW` | Premium | ุนุฑุถ ุงููุถุงูุง ุงููุงููููุฉ |
| ุฅุฏุงุฑุฉ ุงููุถุงูุง ุงููุงููููุฉ | `LEGAL_MANAGE` | Premium | ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงููุถุงูุง ุงููุงููููุฉ |
| ุนุฑุถ ุงูุนููุฏ | `CONTRACTS_VIEW` | Basic | ุนุฑุถ ุฌููุน ุงูุนููุฏ |
| ุฅุฏุงุฑุฉ ุงูุนููุฏ | `CONTRACTS_MANAGE` | Standard | ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูุนููุฏ |
| ุนุฑุถ ุงูุทูุจุงุช | `REQUESTS_VIEW` | Basic | ุนุฑุถ ุทูุจุงุช ุงููุณุชุฃุฌุฑูู |
| ุฅุฏุงุฑุฉ ุงูุทูุจุงุช | `REQUESTS_MANAGE` | Standard | ุงูุฑุฏ ุนูู ูุฅุฏุงุฑุฉ ุงูุทูุจุงุช |
| ุนุฑุถ ุงูุชูููู | `CALENDAR_VIEW` | Standard | ุนุฑุถ ุฃุญุฏุงุซ ุงูุชูููู |
| ุฅุฏุงุฑุฉ ุงูุชูููู | `CALENDAR_MANAGE` | Standard | ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุฃุญุฏุงุซ ุงูุชูููู |
| ุนุฑุถ ุงูุชูุจููุงุช | `ALERTS_VIEW` | Standard | ุนุฑุถ ุชูุจููุงุช ุงูุนูุงุฑ |
| ุฅุฏุงุฑุฉ ุงูุชูุจููุงุช | `ALERTS_MANAGE` | Standard | ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูุชูุจููุงุช |
| ุนุฑุถ ุงูุชููููุงุช | `REVIEWS_VIEW` | Basic | ุนุฑุถ ุชููููุงุช ุงูุนูุงุฑ |
| ุฅุฏุงุฑุฉ ุงูุชููููุงุช | `REVIEWS_MANAGE` | Standard | ุงูุฑุฏ ุนูู ุงูุชููููุงุช |
| ุงูุชูุจุคุงุช ูุงูุฐูุงุก | `AI_ANALYTICS` | Premium | ุชูุจุคุงุช ูุฑุคู ูุฏุนููุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู |
| ุงูุชูุงุฑูุฑ ุงููุชูุฏูุฉ | `ADVANCED_REPORTS` | Premium | ุฅูุดุงุก ุงูุชูุงุฑูุฑ ุงููุชูุฏูุฉ |
| ุงูุนูููุงุช ุงูุฌูุงุนูุฉ | `BULK_OPERATIONS` | Premium | ุชูููุฐ ุงูุนูููุงุช ุงูุฌูุงุนูุฉ |

### ุงููุธุงู (System)

| ุงูุตูุงุญูุฉ | ุงููุนุฑู | ุงูุจุงูุฉ ุงููุทููุจุฉ | ุงููุตู |
|---------|-------|----------------|-------|
| ุงููุตูู ููู API | `API_ACCESS` | Enterprise | ุงููุตูู ุฅูู ูุงุฌูุฉ ุงูุจุฑูุฌุฉ |
| ุงูุนูุงูุฉ ุงูุจูุถุงุก | `WHITE_LABEL` | Enterprise | ุญู ุงูุนูุงูุฉ ุงูุจูุถุงุก |

---

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุงุณุชุฎุฏุงู `FeatureGuard` ูุญูุงูุฉ ูุณู ูุงูู

```tsx
import FeatureGuard from '@/components/FeatureGuard';

function MyComponent() {
  return (
    <FeatureGuard 
      featureId="TASKS_VIEW" 
      mode="lock" 
      showUpgrade={true}
    >
      {/* ุงููุญุชูู ุงููุญูู */}
      <div>
        <h2>ุงูููุงู</h2>
        <TasksList />
      </div>
    </FeatureGuard>
  );
}
```

### 2. ุงุณุชุฎุฏุงู `useFeatureAccess` ููุชุญูู ูู ุตูุงุญูุฉ

```tsx
import { useFeatureAccess } from '@/hooks/useFeatureAccess';

function MyComponent() {
  const { hasAccess, isLoading } = useFeatureAccess('LEGAL_VIEW');

  if (isLoading) return <div>ุฌุงุฑู ุงูุชุญููู...</div>;
  
  if (!hasAccess) {
    return <div>ูุฐู ุงูููุฒุฉ ุบูุฑ ูุชุงุญุฉ ูู ุจุงูุชู ุงูุญุงููุฉ</div>;
  }

  return <div>ุงููุญุชูู ุงููุญูู</div>;
}
```

### 3. ุงุณุชุฎุฏุงู `useFeatureAccessMultiple` ููุชุญูู ูู ุนุฏุฉ ุตูุงุญูุงุช

```tsx
import { useFeatureAccessMultiple } from '@/hooks/useFeatureAccess';

function MyComponent() {
  const { accessMap, isLoading } = useFeatureAccessMultiple([
    'TASKS_VIEW',
    'CALENDAR_VIEW',
    'LEGAL_VIEW'
  ]);

  if (isLoading) return <div>ุฌุงุฑู ุงูุชุญููู...</div>;

  return (
    <div>
      {accessMap['TASKS_VIEW'] && <TasksSection />}
      {accessMap['CALENDAR_VIEW'] && <CalendarSection />}
      {accessMap['LEGAL_VIEW'] && <LegalSection />}
    </div>
  );
}
```

### 4. ุงุณุชุฎุฏุงู `PropertyAdminTabs` ูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุนูุงุฑ

```tsx
import PropertyAdminTabs, { TabContentWrapper } from '@/components/property/PropertyAdminTabs';

function PropertyAdminPage() {
  const [activeTab, setActiveTab] = useState('overview');

  return (
    <div>
      {/* ุงูุชุจููุจุงุช ูุน ุงูุตูุงุญูุงุช */}
      <PropertyAdminTabs 
        activeTab={activeTab}
        onTabChange={setActiveTab}
      />

      {/* ุงููุญุชูู */}
      {activeTab === 'overview' && (
        <TabContentWrapper tabId="overview">
          <OverviewContent />
        </TabContentWrapper>
      )}
      
      {activeTab === 'tasks' && (
        <TabContentWrapper tabId="tasks">
          <TasksContent />
        </TabContentWrapper>
      )}
    </div>
  );
}
```

---

## ๐ ุงูุจุงูุงุช ูุตูุงุญูุงุชูุง

### ๐ฑ ุงูุจุงูุฉ ุงูุฃุณุงุณูุฉ (Basic) - 29 ุฑ.ุน./ุดูุฑ

**ุงูุตูุงุญูุงุช:**
- โ ูุธุฑุฉ ุนุงูุฉ
- โ ุนุฑุถ ุนููุฏ ุงูุฅูุฌุงุฑ
- โ ุนุฑุถ ุงูููุงุชูุฑ
- โ ุนุฑุถ ุงูุนููุฏ
- โ ุนุฑุถ ุงูุทูุจุงุช
- โ ุนุฑุถ ุงูุชููููุงุช

**ุงูุญุฏูุฏ:**
- 5 ุนูุงุฑุงุช
- 20 ูุญุฏุฉ
- 100 ุญุฌุฒ
- 1 ูุณุชุฎุฏู
- 1 GB ุชุฎุฒูู

---

### ๐ ุงูุจุงูุฉ ุงููุนูุงุฑูุฉ (Standard) - 79 ุฑ.ุน./ุดูุฑ

**ุงูุตูุงุญูุงุช:** (ูู Basic +)
- โ ุฅุฏุงุฑุฉ ุงูููุงู (ุนุฑุถ ูุชุญุฑูุฑ)
- โ ุฅุฏุงุฑุฉ ุนููุฏ ุงูุฅูุฌุงุฑ
- โ ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ
- โ ุงูุตูุงูุฉ (ุนุฑุถ ูุฅุฏุงุฑุฉ)
- โ ุฅุฏุงุฑุฉ ุงูุนููุฏ
- โ ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
- โ ุงูุชูููู (ุนุฑุถ ูุฅุฏุงุฑุฉ)
- โ ุงูุชูุจููุงุช (ุนุฑุถ ูุฅุฏุงุฑุฉ)
- โ ุฅุฏุงุฑุฉ ุงูุชููููุงุช

**ุงูุญุฏูุฏ:**
- 25 ุนูุงุฑ
- 100 ูุญุฏุฉ
- 500 ุญุฌุฒ
- 5 ูุณุชุฎุฏููู
- 10 GB ุชุฎุฒูู

---

### ๐ ุงูุจุงูุฉ ุงููููุฒุฉ (Premium) - 149 ุฑ.ุน./ุดูุฑ

**ุงูุตูุงุญูุงุช:** (ูู Standard +)
- โ ุงูุดุคูู ุงููุงููููุฉ (ุนุฑุถ ูุฅุฏุงุฑุฉ)
- โ ุงูุชูุจุคุงุช ูุงูุฐูุงุก ุงูุงุตุทูุงุนู
- โ ุงูุชูุงุฑูุฑ ุงููุชูุฏูุฉ
- โ ุงูุนูููุงุช ุงูุฌูุงุนูุฉ

**ุงูุญุฏูุฏ:**
- 100 ุนูุงุฑ
- 500 ูุญุฏุฉ
- 2000 ุญุฌุฒ
- ูุณุชุฎุฏููู ุบูุฑ ูุญุฏูุฏูู
- 50 GB ุชุฎุฒูู

---

### ๐ ุงูุจุงูุฉ ุงููุคุณุณูุฉ (Enterprise) - 299 ุฑ.ุน./ุดูุฑ

**ุงูุตูุงุญูุงุช:** (ูู Premium +)
- โ ุงููุตูู ููู API
- โ ุงูุนูุงูุฉ ุงูุจูุถุงุก
- โ ุฌููุน ุงูููุฒุงุช

**ุงูุญุฏูุฏ:**
- ุนูุงุฑุงุช ุบูุฑ ูุญุฏูุฏุฉ
- ูุญุฏุงุช ุบูุฑ ูุญุฏูุฏุฉ
- ุญุฌูุฒุงุช ุบูุฑ ูุญุฏูุฏุฉ
- ูุณุชุฎุฏููู ุบูุฑ ูุญุฏูุฏูู
- 200 GB ุชุฎุฒูู

---

## ๐จ ุฃูุถุงุน ุงูุนุฑุถ (Modes)

### 1. **Hide** - ุฅุฎูุงุก ูุงูู

```tsx
<FeatureGuard featureId="LEGAL_VIEW" mode="hide">
  <LegalSection />
</FeatureGuard>
```

**ุงููุชูุฌุฉ:** ูุง ูุธูุฑ ุฃู ุดูุก ุฅุฐุง ูู ุชูู ุงูุตูุงุญูุฉ ูุชุงุญุฉ

---

### 2. **Lock** - ููู ูุน ุฑุณุงูุฉ (ุงูุงูุชุฑุงุถู)

```tsx
<FeatureGuard featureId="AI_ANALYTICS" mode="lock">
  <AISection />
</FeatureGuard>
```

**ุงููุชูุฌุฉ:** ูุธูุฑ ุงููุญุชูู ูุทููุณุงู ูุน ุฑุณุงูุฉ ุชุฑููุฉ ุงุญุชุฑุงููุฉ

---

### 3. **Disable** - ุชุนุทูู ูุน ุดุงุฑุฉ

```tsx
<FeatureGuard featureId="BULK_OPERATIONS" mode="disable">
  <BulkActionsButton />
</FeatureGuard>
```

**ุงููุชูุฌุฉ:** ูุธูุฑ ุงููุญุชูู ุจุงูุชุงู ูุน ุฒุฑ ุชุฑููุฉ ุตุบูุฑ

---

## ๐ ุชุทุจูู ุงููุธุงู ุนูู ุตูุญุงุช ุงููููุน

### ุตูุญุงุช ูุฌุจ ุชุทุจูู ุงููุธุงู ุนูููุง:

#### 1. โ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุนูุงุฑ
- `/property/[id]/admin`
- **ุชู:** ุชุทุจูู `PropertyAdminTabs`

#### 2. โณ ุตูุญุฉ ุงูููุงู
- `/tasks`
- `/admin/tasks`
- **ุงููุทููุจ:** ุงุณุชุฎุฏุงู `FeatureGuard` ูุน `TASKS_VIEW` ู `TASKS_MANAGE`

#### 3. โณ ุตูุญุฉ ุงูุชูููู
- `/calendar`
- **ุงููุทููุจ:** ุงุณุชุฎุฏุงู `FeatureGuard` ูุน `CALENDAR_VIEW`

#### 4. โณ ุตูุญุฉ ุงููุถุงูุง ุงููุงููููุฉ
- `/legal`
- `/legal/[caseId]`
- `/legal/new`
- **ุงููุทููุจ:** ุงุณุชุฎุฏุงู `FeatureGuard` ูุน `LEGAL_VIEW` ู `LEGAL_MANAGE`

#### 5. โณ ุตูุญุฉ ุงูุตูุงูุฉ
- `/admin/maintenance`
- **ุงููุทููุจ:** ุงุณุชุฎุฏุงู `FeatureGuard` ูุน `MAINTENANCE_VIEW`

#### 6. โณ ุตูุญุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู
- `/admin/ai-panel`
- **ุงููุทููุจ:** ุงุณุชุฎุฏุงู `FeatureGuard` ูุน `AI_ANALYTICS`

#### 7. โณ ุตูุญุฉ ุงูุชูุงุฑูุฑ
- `/reports`
- **ุงููุทููุจ:** ุงุณุชุฎุฏุงู `FeatureGuard` ูุน `ADVANCED_REPORTS`

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### 1. ุงุฎุชุจุงุฑ ุจุงูุฉ Basic

```javascript
// ูู localStorage:
{
  "ain_auth": {
    "subscription": {
      "planId": "basic"
    }
  }
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูุธุฑุฉ ุนุงูุฉ ุชุธูุฑ
- โ ุงูููุงู ููููุฉ
- โ ุงูุตูุงูุฉ ููููุฉ
- โ ุงูุดุคูู ุงููุงููููุฉ ููููุฉ
- โ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูููู

---

### 2. ุงุฎุชุจุงุฑ ุจุงูุฉ Standard

```javascript
{
  "ain_auth": {
    "subscription": {
      "planId": "standard"
    }
  }
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูุธุฑุฉ ุนุงูุฉ ุชุธูุฑ
- โ ุงูููุงู ุชุธูุฑ
- โ ุงูุตูุงูุฉ ุชุธูุฑ
- โ ุงูุชูููู ูุธูุฑ
- โ ุงูุดุคูู ุงููุงููููุฉ ููููุฉ
- โ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูููู

---

### 3. ุงุฎุชุจุงุฑ ุจุงูุฉ Premium

```javascript
{
  "ain_auth": {
    "subscription": {
      "planId": "premium"
    }
  }
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุฌููุน ุงูููุฒุงุช ุชุธูุฑ ูุงุนุฏุง API ู White Label

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. **ุงูุชุฎุฒูู ุงููุญูู (localStorage)**

ุงููุธุงู ูุนุชูุฏ ุนูู `localStorage` ููุฑุงุกุฉ ุจุงูุฉ ุงููุณุชุฎุฏู:

```javascript
const authData = localStorage.getItem('ain_auth');
const user = JSON.parse(authData);
const planId = user.subscription.planId;
```

### 2. **ุงูุชุญุฏูุซ ุงูุชููุงุฆู**

ุนูุฏ ุชุบููุฑ ุงูุจุงูุฉ ูู `/subscriptions`ุ ูุชู ุชุญุฏูุซ `localStorage` ุชููุงุฆูุงู.

### 3. **ุตูุญุฉ ุงูุฅุฏุงุฑุฉ**

ุตูุญุฉ `/admin/subscriptions` ุชุชุญูู ูู:
- ุฅูุดุงุก ูุชุนุฏูู ุงูุจุงูุงุช
- ุชุนููู ุงูุจุงูุงุช ูููุณุชุฎุฏููู
- ุนุฑุถ ุงูุตูุงุญูุงุช ููู ุจุงูุฉ

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ ุฅูุดุงุก ูุธุงู ุงูุตูุงุญูุงุช
2. โ ุฅูุดุงุก Hook ููุชุญูู
3. โ ุฅูุดุงุก ูููู FeatureGuard
4. โ ุชุทุจูู ุนูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุนูุงุฑ
5. โณ ุชุทุจูู ุนูู ุจููุฉ ุงูุตูุญุงุช (130+ ุตูุญุฉ)
6. โณ ุฑุจุท ูุน `/admin/subscriptions`
7. โณ ุงุฎุชุจุงุฑ ุดุงูู

---

**ุชู ุฅูุดุงุคู:** 12 ุฃูุชูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 1.0  
**ุงูุญุงูุฉ:** ูุดุท โ

