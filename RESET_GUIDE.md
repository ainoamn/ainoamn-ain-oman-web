# 🔄 دليل تصفير النظام

**التاريخ:** 13 أكتوبر 2025  
**الحالة:** ✅ جاهز للاستخدام

---

## 📋 **ما هو تصفير النظام؟**

تصفير النظام يقوم بحذف جميع البيانات الوهمية والتجريبية من قاعدة البيانات، مع الاحتفاظ بالحسابات التجريبية العشرة المُعدّة للمحاكاة.

---

## 🎯 **ما الذي يتم تصفيره؟**

### ✅ **البيانات التي تُحذف:**

- ✅ جميع العقارات (Properties)
- ✅ جميع الوحدات (Units)
- ✅ جميع المباني (Buildings)
- ✅ جميع المستأجرين (Tenants)
- ✅ جميع الحجوزات (Bookings)
- ✅ جميع العقود (Contracts)
- ✅ جميع الفواتير (Invoices)
- ✅ جميع الشيكات (Checks)
- ✅ جميع طلبات الصيانة (Maintenance)
- ✅ جميع المهام (Tasks)
- ✅ جميع المدفوعات (Payments)
- ✅ جميع القضايا القانونية (Legal Cases)
- ✅ جميع الرسائل (Messages)
- ✅ جميع الإشعارات (Notifications)
- ✅ جميع المعاينات (Viewings)
- ✅ جميع المفضلات (Favorites)
- ✅ جميع الحجوزات المؤقتة (Reservations)
- ✅ جميع المستخدمين العاديين
- ✅ جميع الإحصائيات

### ✅ **البيانات التي تُحفظ:**

- ✅ **الحسابات التجريبية العشرة** (`.data/demo-users.json`)
- ✅ **بيانات الأدوار** (`.data/all-demo-accounts.json`)

---

## 🚀 **كيفية الاستخدام:**

### **الطريقة 1: باستخدام npm** (موصى بها)

```bash
npm run reset
```

### **الطريقة 2: مباشرة عبر Node.js**

```bash
node scripts/reset-system.js
```

### **الطريقة 3: على Windows (ملف bat)**

```bash
scripts\reset-system.bat
```

### **الطريقة 4: التصفير الكامل مع رسالة**

```bash
npm run reset:full
```

---

## ⚡ **متى تستخدم التصفير؟**

### **استخدم التصفير في الحالات التالية:**

1. **قبل بدء محاكاة جديدة** - للبدء من صفحة بيضاء
2. **بعد اختبار كامل** - لحذف البيانات التجريبية
3. **عند وجود بيانات فاسدة** - لإعادة تعيين النظام
4. **قبل عرض توضيحي (Demo)** - لضمان نظافة البيانات
5. **عند الرغبة في محاكاة جديدة** - من الصفر

---

## 📊 **ماذا يحدث بعد التصفير؟**

### **الحالة النهائية:**

```json
{
  "totalProperties": 0,
  "totalUnits": 0,
  "totalBuildings": 0,
  "totalTenants": 0,
  "totalBookings": 0,
  "totalContracts": 0,
  "totalInvoices": 0,
  "totalRevenue": 0,
  "occupancyRate": 0,
  "lastUpdated": "2025-10-13T..."
}
```

### **الحسابات المتاحة بعد التصفير:**

| # | الدور | البريد | الحالة |
|---|--------|--------|--------|
| 1 | مدير الشركة | `admin@ainoman.om` | ✅ محفوظ |
| 2 | المالك | `owner@ainoman.om` | ✅ محفوظ |
| 3 | مدير مفوض | `manager@ainoman.om` | ✅ محفوظ |
| 4 | محاسب | `accountant@ainoman.om` | ✅ محفوظ |
| 5 | مستشار قانوني | `legal@ainoman.om` | ✅ محفوظ |
| 6 | مندوب مبيعات | `sales@ainoman.om` | ✅ محفوظ |
| 7 | فني صيانة | `maintenance@ainoman.om` | ✅ محفوظ |
| 8 | مستأجر | `tenant@example.com` | ✅ محفوظ |
| 9 | مستثمر | `investor@ainoman.om` | ✅ محفوظ |
| 10 | عميل متصفح | `viewer@example.com` | ✅ محفوظ |

---

## 🎬 **سيناريو الاستخدام:**

### **المثال العملي:**

```bash
# 1. إنهاء محاكاة سابقة
# (لديك بيانات تجريبية قديمة)

# 2. تصفير النظام
npm run reset

# ✅ الناتج:
# تم تصفير: properties.json
# تم تصفير: units.json
# ... إلخ
# ✅ تم تصفير النظام بنجاح!

# 3. البدء من جديد
# - سجل دخول بأي حساب من الحسابات العشرة
# - ابدأ المحاكاة من الخطوة 1
```

---

## ⚠️ **تحذيرات مهمة:**

### **⚠️ لا يمكن التراجع!**

- التصفير **نهائي** ولا يمكن التراجع عنه
- **جميع البيانات** ستُحذف بشكل دائم
- **تأكد** من رغبتك في الحذف قبل التشغيل

### **⚠️ في بيئة الإنتاج:**

- **لا تستخدم** هذا الأمر في بيئة الإنتاج!
- مخصص **فقط** للتطوير والاختبار
- استخدم نسخ احتياطية في الإنتاج

---

## 🔧 **تخصيص السكريبت:**

### **لتعديل الملفات التي يتم تصفيرها:**

افتح `scripts/reset-system.js` وعدّل المتغير `emptyData`:

```javascript
const emptyData = {
  'properties.json': {
    properties: [],
    lastId: 0
  },
  // أضف أو احذف ملفات حسب الحاجة
};
```

### **للاحتفاظ ببيانات معينة:**

أضف اسم الملف إلى قائمة `keepFiles`:

```javascript
const keepFiles = [
  'demo-users.json',
  'all-demo-accounts.json',
  'my-custom-file.json' // ملف مخصص
];
```

---

## 📝 **ملفات السكريبت:**

| الملف | الوصف |
|-------|-------|
| `scripts/reset-system.js` | السكريبت الرئيسي (Node.js) |
| `scripts/reset-system.bat` | ملف تشغيل Windows |
| `package.json` | أوامر npm |

---

## 🎯 **الأوامر المتاحة:**

| الأمر | الوصف |
|-------|-------|
| `npm run reset` | تصفير عادي |
| `npm run reset:full` | تصفير + رسالة نجاح |
| `node scripts/reset-system.js` | تشغيل مباشر |
| `scripts\reset-system.bat` | Windows |

---

## ✅ **التحقق من التصفير:**

### **بعد التشغيل، تحقق من:**

1. **افتح المتصفح:** `http://localhost:3000/admin/dashboard`
2. **سجل دخول:** `admin@ainoman.om` / `Admin@2025`
3. **تحقق من الإحصائيات:** يجب أن تكون كلها `0`
4. **تحقق من الصفحات:**
   - `/admin/properties` → فارغة ✅
   - `/admin/units` → فارغة ✅
   - `/admin/bookings` → فارغة ✅
   - `/admin/invoices` → فارغة ✅

---

## 🎊 **النظام جاهز!**

بعد التصفير، النظام **نظيف تماماً** وجاهز لـ:

- ✅ بدء محاكاة جديدة
- ✅ اختبار كامل
- ✅ عرض توضيحي
- ✅ تدريب المستخدمين

---

## 🚀 **ابدأ المحاكاة:**

```
http://localhost:3000/login
```

**استخدم أي حساب من الحسابات العشرة وابدأ!**

---

**📚 للمزيد:**
- `COMPLETE_SIMULATION_GUIDE.md` - دليل المحاكاة الكامل
- `ACCOUNTS_QUICK_REFERENCE.md` - مرجع الحسابات
- `START_HERE.md` - البداية السريعة


