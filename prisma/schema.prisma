model LegalCase {
  id          String   @id @default(cuid())
  caseNumber  String   @unique
  title       String
  description String?
  status      CaseStatus
  priority    Priority
  // أطراف القضية
  plaintiff   String?  // الشاكي
  defendant   String?  // المشكو فيه
  // ربط العقار
  property    Property? @relation(fields: [propertyId], references: [id])
  propertyId  String?
  unit        Unit?     @relation(fields: [unitId], references: [id])
  unitId      String?
  // معلومات المحكمة
  courtName   String?
  courtDepartment String?
  caseNumberInCourt String?
  // معلومات مالية
  totalFees   Float    @default(0)
  paidAmount  Float    @default(0)
  // التواريخ
  hearingDates Json?   // تواريخ الجلسات
  // العلاقات
  lawFirm     LawFirm? @relation(fields: [lawFirmId], references: [id])
  lawFirmId   String?
  client      User?    @relation(fields: [clientId], references: [id])
  clientId    String?
  assignedTo  User?    @relation(fields: [assignedToId], references: [id])
  assignedToId String?
  // التتبع الزمني
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  hearingDate DateTime?
  deadline    DateTime?
  isDraft     Boolean  @default(false)
  // العلاقات
  documents   LegalDocument[]
  proceedings LegalProceeding[]
  tasks       Task[]
  messages    LegalMessage[]
  expenses    LegalExpense[]
  
  @@map("legal_cases")
}

model LegalExpense {
  id          String   @id @default(cuid())
  description String
  amount      Float
  type        ExpenseType
  date        DateTime @default(now())
  case        LegalCase @relation(fields: [caseId], references: [id])
  caseId      String
  createdBy   User     @relation(fields: [createdById], references: [id])
  createdById String
  receiptUrl  String?
  isPaid      Boolean  @default(false)
  paymentDate DateTime?
  
  @@map("legal_expenses")
}

enum ExpenseType {
  LEGAL_FEES
  COURT_FEES
  ADMINISTRATIVE
  TRANSPORTATION
  OTHER
}