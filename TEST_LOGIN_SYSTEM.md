# 🧪 دليل اختبار نظام تسجيل الدخول الجديد

## 🚀 البدء السريع

### 1. تشغيل السيرفر
```bash
npm run dev
```

السيرفر الآن يعمل على: http://localhost:3000

---

## 📋 صفحات الاختبار

### 1️⃣ صفحة تسجيل الدخول الرئيسية
**URL:** http://localhost:3000/login

**ما يمكن اختباره:**
- ✅ التبديل بين التبويبات الثلاثة
- ✅ تسجيل الدخول بالبريد الإلكتروني
- ✅ تسجيل الدخول برقم الهاتف
- ✅ تسجيل الدخول عبر وسائل التواصل (5 منصات)
- ✅ التبديل بين تسجيل الدخول/إنشاء حساب
- ✅ التصميم Responsive

**خطوات الاختبار:**

#### أ) البريد الإلكتروني:
1. اضغط على تبويب "البريد الإلكتروني"
2. أدخل: `test@ainoman.om`
3. أدخل كلمة مرور: `12345678`
4. اضغط "تسجيل الدخول"
5. سيتم توجيهك إلى `/auth/verify`

#### ب) رقم الهاتف:
1. اضغط على تبويب "رقم الهاتف"
2. أدخل: `+968 91234567`
3. اضغط "إرسال كود التحقق"
4. تحقق من Console للحصول على الكود
5. أدخل الكود (أي 6 أرقام)
6. اضغط "تحقق من الكود"
7. سيتم توجيهك إلى `/auth/verify`

#### ج) وسائل التواصل:
1. اضغط على تبويب "وسائل التواصل"
2. اختر نوع الحساب
3. اضغط على أي منصة (Google, Facebook, إلخ)
4. سيتم توجيهك إلى `/auth/verify`

---

### 2️⃣ صفحة التوثيق
**URL:** http://localhost:3000/auth/verify

**ما يمكن اختباره:**
- ✅ التوثيق عبر البريد الإلكتروني
- ✅ التوثيق عبر الهاتف
- ✅ رفع الوثائق الرسمية
- ✅ معاينة الصور المرفوعة

**خطوات الاختبار:**

#### أ) التوثيق عبر البريد:
1. اضغط على تبويب "البريد الإلكتروني"
2. اضغط "إرسال كود التحقق"
3. تحقق من Console للحصول على الكود
4. أدخل الكود (أي 6 أرقام)
5. اضغط "تأكيد التوثيق"
6. سيتم توجيهك إلى `/dashboard`

#### ب) التوثيق عبر الهاتف:
1. اضغط على تبويب "رقم الهاتف"
2. اضغط "إرسال كود التحقق عبر واتساب"
3. تحقق من Console للحصول على الكود
4. أدخل الكود (أي 6 أرقام)
5. اضغط "تأكيد التوثيق"
6. سيتم توجيهك إلى `/dashboard`

#### ج) رفع الوثائق:
1. اضغط على تبويب "الوثائق الرسمية"
2. اختر نوع الوثيقة (البطاقة الشخصية، جواز السفر، إلخ)
3. أدخل رقم الوثيقة (أي رقم)
4. اضغط على منطقة رفع الصورة
5. اختر صورة من جهازك
6. شاهد المعاينة
7. اضغط "إرسال الوثيقة للمراجعة"
8. سيتم توجيهك إلى `/dashboard?verification=pending`

---

### 3️⃣ صفحة استرجاع كلمة المرور
**URL:** http://localhost:3000/auth/forgot-password

**ما يمكن اختباره:**
- ✅ إرسال كود إعادة التعيين
- ✅ التحقق من الكود
- ✅ إعادة تعيين كلمة المرور
- ✅ التحقق من قوة كلمة المرور

**خطوات الاختبار:**

1. **الخطوة 1 - البريد:**
   - أدخل: `test@ainoman.om`
   - اضغط "إرسال كود الاسترجاع"
   - تحقق من Console للحصول على الكود

2. **الخطوة 2 - الكود:**
   - أدخل الكود (أي 6 أرقام)
   - اضغط "تحقق من الكود"

3. **الخطوة 3 - كلمة المرور:**
   - أدخل كلمة مرور جديدة (8 أحرف على الأقل)
   - أدخل تأكيد كلمة المرور (نفس الأولى)
   - اضغط "تعيين كلمة المرور"
   - سيتم توجيهك إلى `/login`

---

## 🎨 اختبار التصميم Responsive

### Mobile (أقل من 768px):
1. افتح DevTools (F12)
2. اضغط على أيقونة الجوال
3. اختر iPhone/Android
4. تحقق من:
   - ✅ عمود واحد للمحتوى
   - ✅ التبويبات تعمل بشكل صحيح
   - ✅ الأزرار واضحة وسهلة الضغط
   - ✅ النماذج سهلة الاستخدام

### Tablet (768px - 1024px):
1. غير حجم النافذة إلى Tablet
2. تحقق من:
   - ✅ التصميم متوازن
   - ✅ المساحات مناسبة

### Desktop (أكبر من 1024px):
1. افتح في نافذة كاملة
2. تحقق من:
   - ✅ ظهور Branding section على اليسار
   - ✅ التصميم جميل ومتناسق

---

## 🔍 اختبار APIs

### في Console:
افتح DevTools → Console، ثم جرب:

```javascript
// اختبار API التسجيل
fetch('/api/auth/signup', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    email: 'test@ainoman.om',
    password: '12345678',
    name: 'Test User',
    role: 'owner'
  })
}).then(r => r.json()).then(console.log)

// اختبار API تسجيل الدخول الاجتماعي
fetch('/api/auth/social/google', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ role: 'owner' })
}).then(r => r.json()).then(console.log)

// اختبار API إرسال كود البريد
fetch('/api/auth/verify/send-email', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    email: 'test@ainoman.om',
    userId: 'USER-123'
  })
}).then(r => r.json()).then(console.log)
```

---

## ✅ قائمة التحقق الكاملة

### صفحة تسجيل الدخول:
- [ ] التبويبات تعمل بشكل صحيح
- [ ] البريد الإلكتروني: النماذج والتحققات
- [ ] رقم الهاتف: إرسال OTP والتحقق
- [ ] وسائل التواصل: جميع الأزرار (5) تعمل
- [ ] رابط "نسيت كلمة المرور" يعمل
- [ ] رابط "الشروط والأحكام" يعمل
- [ ] رابط "سياسة الخصوصية" يعمل
- [ ] التصميم Responsive

### صفحة التوثيق:
- [ ] التبويبات الثلاثة تعمل
- [ ] إرسال كود البريد
- [ ] التحقق من كود البريد
- [ ] إرسال كود الهاتف
- [ ] التحقق من كود الهاتف
- [ ] رفع الوثائق
- [ ] معاينة الوثائق
- [ ] رابط "الانتقال إلى الداشبورد"

### صفحة استرجاع كلمة المرور:
- [ ] الخطوة 1: إرسال الكود
- [ ] الخطوة 2: التحقق من الكود
- [ ] الخطوة 3: إعادة التعيين
- [ ] التحقق من قوة كلمة المرور
- [ ] رابط "العودة لتسجيل الدخول"

### APIs:
- [ ] `/api/auth/signup` يعمل
- [ ] `/api/auth/social/[provider]` يعمل
- [ ] `/api/auth/verify/*` جميع الـ endpoints تعمل
- [ ] `/api/auth/forgot-password/*` جميع الـ endpoints تعمل

---

## 🐛 مشاكل معروفة

### في التطوير:
- ⚠️ جميع الأكواد يتم عرضها في Console (للاختبار)
- ⚠️ لا يتم إرسال بريد أو SMS حقيقي
- ⚠️ يتم قبول أي كود مكون من 6 أرقام

### للإنتاج:
- ❗ يجب تنفيذ OAuth الكامل
- ❗ يجب إضافة خدمة إرسال البريد
- ❗ يجب إضافة خدمة إرسال SMS
- ❗ يجب حفظ البيانات في قاعدة بيانات حقيقية
- ❗ يجب تشفير كلمات المرور

---

## 📝 ملاحظات

### للحصول على الأكواد:
افتح Console (F12) وابحث عن رسائل مثل:
```
Verification code for test@ainoman.om: 123456
Password reset code for test@ainoman.om: 654321
```

### localStorage:
بعد تسجيل الدخول، يمكنك التحقق من البيانات المحفوظة:
```javascript
console.log(JSON.parse(localStorage.getItem('ain_auth')))
```

---

## 🎉 استمتع بالاختبار!

إذا واجهت أي مشكلة، تحقق من:
1. Console للأخطاء
2. Network tab لـ API calls
3. الملفات المُنشأة في المجلد المناسب

---

*تاريخ الإنشاء: 8 أكتوبر 2025*  
*الحالة: جاهز للاختبار ✅*

